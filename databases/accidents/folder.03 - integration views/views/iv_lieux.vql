CREATE OR REPLACE VIEW iv_lieux FOLDER = '/03 - integration views'
    PRIMARY KEY ( 'num_acc' ) AS SELECT bv_lieux.num_acc AS num_acc, concat(nullif(bv_lieux.voie, '0'), v1, v2) AS numero_route, bv_lieux.nbv AS nombre_voies, bv_lieux.pr AS borne_rattachement, bv_lieux.pr1 AS borne_distance, bv_profil.description AS profil, bv_plan.description AS trace_plan, bv_etat_surface.description AS etat_surface, nullif(cast(bv_lieux.lartpc AS INTEGER), 0) AS largeur_terre_plein, nullif(cast(bv_lieux.larrout AS INTEGER), 0) AS largeur_route, bv_infrastructure.description AS infrastructure, nullif(cast(bv_lieux.env1 AS INTEGER), 0) AS proximite_ecole, bv_categorie_route.description AS categorie_route, bv_voie_reservee.description AS voie_reservee, bv_regime_circulation.description AS regime_circulation, bv_situation_accident.description AS situation_accident FROM (((((((bv_lieux AS bv_lieux LEFT OUTER JOIN bv_categorie_route AS bv_categorie_route ON bv_lieux.catr = bv_categorie_route.code ) LEFT OUTER JOIN bv_regime_circulation AS bv_regime_circulation ON bv_lieux.circ = bv_regime_circulation.code ) LEFT OUTER JOIN bv_voie_reservee AS bv_voie_reservee ON bv_lieux.vosp = bv_voie_reservee.code ) LEFT OUTER JOIN bv_profil AS bv_profil ON bv_lieux.prof = bv_profil.code ) LEFT OUTER JOIN bv_plan AS bv_plan ON bv_lieux.plan = bv_plan.code ) LEFT OUTER JOIN bv_etat_surface AS bv_etat_surface ON bv_lieux.surf = bv_etat_surface.code ) LEFT OUTER JOIN bv_infrastructure AS bv_infrastructure ON bv_lieux.infra = bv_infrastructure.code ) LEFT OUTER JOIN bv_situation_accident AS bv_situation_accident ON bv_lieux.situ = bv_situation_accident.code ;

ALTER VIEW iv_lieux
 LAYOUT (bv_lieux = [20, 20, 200, 386], bv_categorie_route = [380, 0, 200, 66], bv_regime_circulation = [420, 80, 200, 66], bv_voie_reservee = [430, 160, 200, 66], bv_profil = [450, 240, 200, 66], bv_plan = [460, 310, 200, 66], bv_etat_surface = [470, 390, 200, 66], bv_infrastructure = [420, 470, 200, 66], bv_situation_accident = [360, 560, 200, 66]);

